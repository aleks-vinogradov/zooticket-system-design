@startuml
title Процесс возврата билета

|Посетитель|
start
:Подает заявку на возврат
в ЛК/через поддержку;

|Система ZooTicket|
:Получает заявку;

if (Проверка правил возврата автоматически) then (Возврат возможен)
  :Статус: "На согласовании";
  
  |Администратор|
  :Проверяет заявку;
  
  if (Принять решение) then (Одобрить)
    :Статус: "Возврат одобрен";
    
    |Система ZooTicket|
    :Статус: "Возврат одобрен";
    :Инициирует возврат средств
    в Платежной системе;
    
    |Платежная система|
    :Возвращает средства
    на исходный счет;
    :Подтверждает возврат;
    
    |Система ZooTicket|
    :Обновляет статус билета
    на "Возвращен";
    :Уведомляет Посетителя;
    
    |Посетитель|
    :Получает уведомление
    и возврат денег;
    stop
    
  else (Отклонить)
    :Статус: "Отклонен";
    :Указывает причину отказа;
    
    |Система ZooTicket|
    :Статус: "Отклонен";
    :Уведомляет Посетителя;
    
    |Посетитель|
    :Получает уведомление
    с причиной отказа;
    stop
  endif
  
else (Возврат невозможен)
  :Статус: "Отклонен";
  :Уведомляет Посетителя;
  
  |Посетитель|
  :Получает уведомление
  с причиной отказа;
  stop
endif

@enduml
